const t=b;(function(c,d){const s=b,e=c();while(!![]){try{const f=-parseInt(s(0x193))/0x1+parseInt(s(0x1d6))/0x2+-parseInt(s(0x13c))/0x3*(-parseInt(s(0x1b3))/0x4)+-parseInt(s(0x126))/0x5*(-parseInt(s(0x1aa))/0x6)+parseInt(s(0x1a2))/0x7*(parseInt(s(0x189))/0x8)+-parseInt(s(0x159))/0x9*(parseInt(s(0x147))/0xa)+-parseInt(s(0x1ca))/0xb*(-parseInt(s(0x1d7))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x96b5a));var show_debugs=![];document['getElementById'](t(0x16c))[t(0x121)](t(0x16b),handleFileSelect,![]),window[t(0x17e)]=window[t(0x162)][t(0x17e)];var osmd=new opensheetmusicdisplay[(t(0x17b))](t(0x12c));osmd[t(0x15c)]=new opensheetmusicdisplay['TransposeCalculator']();var isMobile,fontFamilyName,fontFamilyVar,ttfName,callAddFont,zoomVal,transposeVal,originalKey,thisKey,originalTitle,oTitleText,newTitle,zoomDivs;const majorMap={'-1':'F','-2':'Bb','-3':'Eb','-4':'Ab','-5':'Db','-6':'Gb','-7':'Cb','-8':'Fb','0':'C','1':'G','2':'D','3':'A','4':'E','5':'B','6':'F#','7':'C#','8':'G#'},minorMap={'-1':'Dm','-2':'Gm','-3':'Cm','-4':'Fm','-5':t(0x1a1),'-6':t(0x13d),'-7':t(0x19a),'-8':t(0x184),'0':'Am','1':'Em','2':'Bm','3':'F#m','4':'C#m','5':'G#m','6':t(0x191),'7':t(0x1d9),'8':'E#m'},transposeCircle=[['C'],['C#','Db'],['D'],['D#','Eb'],['E'],['F'],['F#','Gb'],['G'],['G#','Ab'],['A'],['A#','Bb'],['B']];function changeSetting(){const u=t;$(u(0x19d))['attr'](u(0x199),u(0x18e)),changeTitle(),getPageNumber(),transposeDiv();}function getPageNumber(){const v=t,c=$('div[id^=\x22osmdCanvasPage\x22]');let d='\x20('+originalKey+'→'+thisKey+'\x20,\x20'+c['length']+'P)';if(originalKey==thisKey)d='\x20('+thisKey+'\x20,\x20'+c['length']+'P)';if(c[v(0x183)])$(v(0x14a))[v(0x16d)](d);}function changeTitle(){const w=t;thisKey=getKeyOSMD(),osmd[w(0x175)](),osmd[w(0x188)]();if(show_debugs)console[w(0x186)](w(0x1c1)+thisKey);let c;osmd[w(0x118)]()?c=osmd['sheet'][w(0x197)]:c=$(w(0x1d0))[w(0x16d)]();let d=c['indexOf']('|');if(show_debugs)console['log'](w(0x1d8)+d);let e=c;if(d>0x0)e=c[w(0x132)](0x0,d);newTitle=e+'\x20|\x20'+thisKey,$('text[font-size=\x2240px\x22]')[w(0x16d)](newTitle);if(show_debugs)console['log'](w(0x1b1)+newTitle);}function zoomDiv(){for(const c of zoomDivs){c&&(c['innerHTML']=Math['floor'](zoomVal*0x64)+'%');}}function transposeDiv(){const x=t;for(const c of transposeDivs){if(c){c['innerHTML']=x(0x119);if(osmd[x(0x118)]())c[x(0x141)]=thisKey;}}}function transpose(){const y=t;window[y(0x1ce)](function(){const z=y;if(show_debugs)console[z(0x186)](z(0x18b)+transposeVal);osmd[z(0x118)]()&&(osmd[z(0x156)][z(0x1bf)]=Number(transposeVal),osmd[z(0x175)](),osmd[z(0x188)](),changeSetting(),transposeDiv());},0x0);}function changeFont(){const A=t;window[A(0x1ce)](function(){const B=A;fontFamilyName=$(B(0x1b6))['val']();if(fontFamilyName==='NanumMyeongjo')fontFamilyVar=NanumMyeongjo;if(fontFamilyName===B(0x180))fontFamilyVar=KoPubDotumMedium;if(fontFamilyName==='NanumBarunGothic')fontFamilyVar=NanumBarunGothic;ttfName=fontFamilyName+'.ttf',callAddFont=function(){const C=B;this[C(0x12e)](ttfName,fontFamilyVar),this[C(0x19b)](ttfName,fontFamilyName,C(0x15d));},jsPDF[B(0x1bb)][B(0x14b)][B(0x1c6)](['addFonts',callAddFont]);if(show_debugs)console[B(0x186)](B(0x15f)+fontFamilyName);osmd['IsReadyToRender']()&&(osmd[B(0x1ac)]({'defaultFontFamily':fontFamilyName}),osmd[B(0x188)](),changeSetting());},0x0);}function scale(){const D=t;window[D(0x1ce)](function(){const E=D;if(show_debugs)console[E(0x186)](E(0x1d2)+zoomVal);osmd[E(0x118)]()&&(osmd['Zoom']=zoomVal,osmd[E(0x188)](),changeSetting(),zoomDiv());},0x0);}$(document)[t(0x187)](function(){const F=t;$('.ui.form')[F(0x152)](),$(F(0x163))['dropdown'](),$(F(0x181))['dropdown']({'fullTextSearch':!![],'allowReselection':![]}),$('.ui.radio.checkbox')[F(0x139)](),$(F(0x1b5))[F(0x139)](),isMobile=c();function c(){const G=F;try{return document[G(0x164)](G(0x19e)),!![];}catch(d){return![];}};if(show_debugs)console[F(0x186)](F(0x18f)+isMobile);}),$[t(0x14f)](hymnArrays,function(c,d){const H=t;var e=$(H(0x124)+d['title']+H(0x148));e[H(0x127)](d['number']),$(H(0x151))['append'](e);}),$(t(0x151))['on']('change',function(){const I=t;init();const c=this['value']+I(0x154),d=I(0x1a7),e=d+c;$[I(0x1c7)]({'url':e,'cache':![],'dataType':I(0x1b8),'success':function(f){const J=I;if(show_debugs)console[J(0x186)]('fontFamilyName:\x20'+fontFamilyName);originalKey=getKeyXML(f);if(show_debugs)console[J(0x186)]('Original\x20Key:\x20'+originalKey);renderOSMD(f);if(show_debugs)console[J(0x186)](J(0x1cd));},'error':function(f,g,h){const K=I;if(show_debugs)console['error'](K(0x1c5)+f[K(0x11c)]+K(0x1c9)+f[K(0x17a)]+'\x20error\x20=\x20'+h);alert(K(0x1c5)+f[K(0x11c)]+K(0x1c9)+f['responseText']+K(0x11f)+h);},'complete':function(){const L=I;if(show_debugs)console[L(0x186)]('xml\x20load\x20complete!');}});});function getKeyXML(c){const M=t;let d=$(c)[M(0x140)](M(0x15e)),e=$(c)[M(0x140)](M(0x131));const f=d[0x0][M(0x12d)][0x0][M(0x149)],g=e[0x0][M(0x12d)][0x0][M(0x149)];let h='C';if(g===M(0x1c4))h=majorMap[f];else g===M(0x15a)&&(h=minorMap[f]);return h;}function getKeyOSMD(){const N=t,c=0x0,d=osmd[N(0x156)]['SourceMeasures'][0x0][N(0x174)](c),e=d[N(0x18c)],f=d['Mode'];let g='C';if(f===0x0)g=majorMap[e];else f===0x1&&(g=minorMap[e]);return g;}function b(c,d){const e=a();return b=function(f,g){f=f-0x118;let h=e[f];return h;},b(c,d);}function handleFileSelect(c){const O=t;var d=c[O(0x130)][O(0x150)][0x0];if(!d['name'][O(0x123)](O(0x171))&&!d[O(0x194)]['match'](O(0x1ad))&&!d[O(0x194)]['match'](O(0x18d))){alert(O(0x185));return;}var e=new FileReader();e['onload']=function(f){const P=O,g=f[P(0x130)]['result'];renderOSMD(g);},d[O(0x194)]['match'](O(0x18d))?e['readAsBinaryString'](d):e[O(0x134)](d);}$(t(0x13e))[t(0x1ab)](function(){const Q=t;if(!osmd[Q(0x118)]())return alert(Q(0x12f)),![];$('.ui.dimmer')['dimmer']('show'),createPdf(newTitle);}),$(t(0x155))[t(0x1ab)](function(){init();}),$('#rerenderBtn')[t(0x1ab)](function(){const R=t;if(!osmd[R(0x118)]())return alert(R(0x12f)),![];if(osmd[R(0x118)]()){$('#musicSheet')[R(0x192)](),$('.ui.dimmer')[R(0x1c2)](R(0x16f)),osmd[R(0x188)](),changeSetting();if(show_debugs)console[R(0x186)]('ReRendered');}});async function createPdf(c){const S=t;c=c[S(0x13b)](S(0x157),'_');let d=c+S(0x190);if(show_debugs)console[S(0x186)]('backendType:\x20'+osmd[S(0x12a)]);if(osmd[S(0x12a)]!==0x0){if(show_debugs)console[S(0x186)](S(0x11e)+S(0x11b));}c===undefined&&(d=osmd[S(0x129)][S(0x197)]+S(0x190));const e=osmd[S(0x122)]['Backends'];let f=e[0x0][S(0x158)]();f[S(0x1af)]();let g=0xd2,h=0x129;const i=osmd[S(0x138)]['PageFormat'];i&&!i[S(0x1bc)]?(g=i[S(0x133)],h=i[S(0x1c3)]):h=g*f[S(0x1b7)]/f['clientWidth'];const j=h>g?'p':'l',k=new jsPDF({'orientation':j,'unit':'mm','format':[g,h]});if(show_debugs)console[S(0x186)](S(0x198)+g);if(show_debugs)console['log'](S(0x1a9)+h);k[S(0x1b4)](fontFamilyName);for(let p=0x0,q=e[S(0x183)];p<q;++p){p>0x0&&k[S(0x120)]();f=e[p][S(0x158)]();if(!k['svg']&&!svg2pdf){if(show_debugs)console['log'](S(0x1cb));return;}await k['svg'](f,{'x':0x0,'y':0x0,'width':g,'height':h});}k[S(0x19c)]({'title':osmd[S(0x129)][S(0x197)],'subject':S(0x16e)+osmd[S(0x129)][S(0x1d3)],'author':S(0x169)+osmd[S(0x129)]['LyricistString']+S(0x1b9)+osmd[S(0x129)][S(0x17d)],'keywords':osmd[S(0x129)][S(0x197)]+'\x0a'+osmd[S(0x129)]['LyricistString']+'\x20/\x20'+osmd[S(0x129)][S(0x17d)],'creator':S(0x145)});var l=k['internal'][S(0x161)]();for(i=0x0;i<l;i++){k[S(0x17c)](i);let r=k[S(0x14e)]['getCurrentPageInfo']()['pageNumber'];k[S(0x167)](0x8);if(l>0x1)k['text'](S(0x1bd)+r+'/'+l,0xa,0xa,null,null,S(0x13a));}var m=k[S(0x1da)](),n=k['getFontSize']();if(show_debugs)console[S(0x186)](S(0x1ae)+n);const o=await k['save'](d);$(S(0x1d1))[S(0x1c2)](S(0x16f));}$(t(0x176))['on'](t(0x1ab),function(){const T=t,c=$('div[id^=\x22osmdCanvasPage\x22]');if(!c[T(0x183)])return alert(T(0x12f)),![];c['length']>0x0&&($(T(0x1d1))[T(0x1c2)](T(0x178)),imgDown(c));});async function imgDown(c){const U=t;isMobile&&($('#imgContainer')[U(0x195)](U(0x199),U(0x1b0)),$(U(0x19d))[U(0x142)](U(0x1a4)));for(let d=0x0;d<c['length'];d++){if(c[U(0x183)]>0x1)await renderingPNG(c[d],d+0x1);if(c[U(0x183)]<=0x1)await renderingPNG(c[d],0x0);}if(show_debugs)console[U(0x186)]('Done!\x20download\x20image');$(U(0x1d1))[U(0x1c2)](U(0x16f));}async function renderingPNG(c,d){const V=t;try{await html2canvas(c,{'scale':0x2,'backgroundColor':V(0x146)})[V(0x1c8)](e=>{const W=V;let f=e[W(0x168)](W(0x135),0x1),g;if(d==0x0)g=newTitle+W(0x196);if(d>0x0)g=newTitle+'-'+d+'.png';downloadURI(f,g);});}catch(e){if(show_debugs)console[V(0x186)](V(0x1ba)+e);$(V(0x1d1))[V(0x1c2)](V(0x16f));}}async function downloadURI(c,d){const X=t;let e=$(X(0x1be))[X(0x133)]();d=d[X(0x13b)]('\x20|\x20','_');if(e>=0x384){var f=document[X(0x153)]('a');f[X(0x165)]=d,f[X(0x1cc)]=c,document[X(0x144)][X(0x14c)](f),f[X(0x1ab)]();}if(e<0x384){var g=document[X(0x153)]('a');g[X(0x165)]=d,g[X(0x19f)]=d,g[X(0x1cc)]=c;var h=document[X(0x1d4)]('imgContainer');h['appendChild'](g),h['appendChild'](document[X(0x153)]('br'));}}async function renderOSMD(c){const Y=t;await osmd[Y(0x166)](c),osmd[Y(0x156)][Y(0x1bf)]=Number(transposeVal),osmd[Y(0x17f)]=zoomVal,osmd[Y(0x1ac)]({'backend':'svg','drawSlurs':!![],'pageFormat':Y(0x12b),'defaultFontFamily':fontFamilyName,'defaultFontStyle':0x0,'defaultColorTitle':'black','autoResize':![],'autoBeam':![],'drawUpToMeasureNumber':Number[Y(0x1cf)],'drawLyrics':!![],'drawTitle':!![],'drawSubtitle':!![],'drawComposer':!![],'drawLyricist':!![],'drawCredits':!![],'drawMetronomeMarks':!![],'drawPartNames':![],'drawPartAbbreviations':!![],'drawMeasureNumbers':!![],'drawingParameters':'default','RenderChordSymbols':!![],'measureNumberInterval':0x3,'stretchLastSystemLine':!![]}),await osmd[Y(0x188)]();if(show_debugs)console[Y(0x186)](Y(0x1a3));await changeSetting();if(show_debugs)console['log'](Y(0x173));$(Y(0x13e))[Y(0x1a8)]();}function init(){const Z=t;$(Z(0x19d))[Z(0x192)](),$(Z(0x19d))[Z(0x195)](Z(0x199),'display:none'),$(Z(0x14a))[Z(0x192)](),$(Z(0x1d1))[Z(0x1c2)](Z(0x16f)),$(Z(0x18a))['val'](''),$('#Fontface')[Z(0x1a0)](Z(0x137)),$(Z(0x1be))[Z(0x192)]();if(osmd[Z(0x118)]())osmd[Z(0x16a)]();transposeVal=0x0,zoomDivs=[],zoomDivs[Z(0x1c6)](document[Z(0x1d4)](Z(0x1c0))),zoomIns=[],zoomIns[Z(0x1c6)](document[Z(0x1d4)]('zoom-in-btn')),zoomOuts=[],zoomOuts[Z(0x1c6)](document[Z(0x1d4)](Z(0x177))),transposeDivs=[],transposeDivs['push'](document[Z(0x1d4)](Z(0x182))),transposeUps=[],transposeUps['push'](document[Z(0x1d4)](Z(0x143))),transposeDowns=[],transposeDowns[Z(0x1c6)](document[Z(0x1d4)](Z(0x1d5))),fontFamilyName=Z(0x128);if(fontFamilyName==='NanumMyeongjo')fontFamilyVar=NanumMyeongjo;if(fontFamilyName===Z(0x180))fontFamilyVar=KoPubDotumMedium;if(fontFamilyName==='NanumBarunGothic')fontFamilyVar=NanumBarunGothic;ttfName=fontFamilyName+Z(0x1a5),callAddFont=function(){const a0=Z;this['addFileToVFS'](ttfName,fontFamilyVar),this[a0(0x19b)](ttfName,fontFamilyName,a0(0x15d));},jsPDF[Z(0x1bb)]['events']['push']([Z(0x170),callAddFont]);var c=$(Z(0x1be))['width'](),d=$(Z(0x125))[Z(0x133)]();if(show_debugs)console[Z(0x186)](Z(0x13f)+c+Z(0x11d)+'canvasWidth:\x20'+d);zoomVal=0x1;if(c>=0x384&&d>=0x4b0)zoomVal=0.8;if(c>=0x384&&d<0x4b0)zoomVal=0.7;if(c>0x2bc&&c<0x384)zoomVal=0.6;if(c<=0x2bc)zoomVal=0.4;if(show_debugs)console[Z(0x186)]('현재\x20브라우저\x20가로\x20사이즈:\x20'+d);if(show_debugs)console[Z(0x186)](Z(0x160)+zoomVal);if(c<0x2bc)$(Z(0x136))[Z(0x172)](Z(0x1b2));zoomDiv(),transposeDiv();for(const e of zoomIns){e&&(e[Z(0x1a6)]=function(){const a1=Z;if(!osmd[a1(0x118)]())alert(a1(0x15b));if(osmd[a1(0x118)]()){zoomVal*=1.1;if(show_debugs)console['log'](a1(0x179)+zoomVal);scale();}});}for(const f of zoomOuts){f&&(f[Z(0x1a6)]=function(){const a2=Z;if(!osmd[a2(0x118)]())alert('선택된\x20악보가\x20없습니다.');if(osmd[a2(0x118)]()){zoomVal/=1.1;if(show_debugs)console[a2(0x186)](a2(0x179)+zoomVal);scale();}});}for(const g of transposeUps){g&&(g[Z(0x1a6)]=function(){const a3=Z;if(!osmd['IsReadyToRender']())alert(a3(0x15b));if(osmd[a3(0x118)]()){transposeVal+=0x1;if(show_debugs)console[a3(0x186)]('transposeVal:\x20'+transposeVal);transpose();}});}for(const h of transposeDowns){h&&(h[Z(0x1a6)]=function(){const a4=Z;if(!osmd[a4(0x118)]())alert('선택된\x20악보가\x20없습니다.');if(osmd['IsReadyToRender']()){transposeVal-=0x1;if(show_debugs)console[a4(0x186)]('transposeVal:\x20'+transposeVal);transpose();}});}}window[t(0x121)]('load',function(){init();}),window[t(0x121)](t(0x14d),function(){const a5=t;let c=$(a5(0x1be))[a5(0x133)]();if(c>=0x384)$('#imgContainer')['attr']('style',a5(0x18e));if(c>=0x2bc)$(a5(0x136))[a5(0x11a)](a5(0x1b2));if(c<0x2bc)$(a5(0x136))[a5(0x172)]('container');});function a(){const a6=['.ui.dimmer','확대/축소:\x20','SubtitleString','getElementById','transpose-down-btn','911190UmIrGu','18516AdUljz','findKeyPosition:\x20','A#m','getFontList','IsReadyToRender','key','addClass','\x20Please\x20use\x20osmd.setOptions({backendType:\x20SVG}).','status','\x20/\x20','[OSMD]\x20createPdf():\x20Warning:\x20createPDF\x20is\x20only\x20supported\x20for\x20SVG\x20background\x20for\x20now,\x20not\x20for\x20Canvas.','\x20error\x20=\x20','addPage','addEventListener','drawer','match','<option>','#createCanvas','50705zntJUP','val','NanumMyeongjo','sheet','backendType','A4_P','musicSheet','childNodes','addFileToVFS','파일을\x20선택\x20또는\x20업로드\x20해\x20주세요.','target','mode','substr','width','readAsText','image/png','#topContainer','restore\x20defaults','rules','checkbox','left','replace','90NzOrcZ','Ebm','#pdfDownload','mWidth:\x20','find','innerHTML','html','transpose-up-btn','body','David','#ffffff','16070JVVeix','</option>','nodeValue','#pdfBtnStr','events','appendChild','resize','internal','each','files','#hymnLists','form','createElement','.xml','#resetBtn','Sheet','\x20|\x20','getSvgElement','5094hTEsHc','minor','선택된\x20악보가\x20없습니다.','TransposeCalculator','normal','fifths','Selected\x20Font:\x20','줌값설정:\x20','getNumberOfPages','jspdf','select.dropdown','createEvent','download','load','setFontSize','toDataURL','Lyricist:','clear','change','fileInput','text','Subject:\x20','hide','addFonts','.*.xml','removeClass','changed\x20title\x20(1)','getKeyInstruction','updateGraphic','#downImg','zoom-out-btn','show','zoomVal:\x20','responseText','OpenSheetMusicDisplay','setPage','ComposerString','jsPDF','zoom','KoPubDotumMedium','.ui.dropdown','transpose-str','length','Dbm','You\x20selected\x20a\x20non-xml\x20file.\x20Please\x20select\x20only\x20music\x20xml\x20files.','log','ready','render','3491720BYNKBl','#fileInput','조옮김\x20값:\x20','Key','.*.mxl','display:none','isMobile:\x20','.pdf','D#m','empty','1015758pqfQcn','name','attr','.png','TitleString','PDF\x20pageWidth:\x20','style','Abm','addFont','setProperties','#imgContainer','TouchEvent','innerText','dropdown','Bbm','7kWbGsA','osmd\x20render\x20Done','<div\x20class=\x27ui\x20content\x27>*Download\x20Image\x20Files</div>','.ttf','onclick','./HymnXML_Merge/','focus','PDF\x20pageHeight:\x20','258orQBpj','click','setOptions','.*.musicxml','fontSize\x20:\x20','getBoundingClientRect','display:block','newTitle:\x20','container','32116mTEGZY','setFont','.ui.checkbox','#Fontface','clientHeight','xml','\x20/\x20Composer:\x20','Error!\x20:\x20','API','IsUndefined','page:\x20','#musicSheet','Transpose','zoom-str','Changed\x20key:\x20','dimmer','height','major','XML로딩에러\x20\x0a\x20code\x20=\x20','push','ajax','then','\x20message\x20=\x20','6941hscoGP','svg2pdf\x20missing,\x20necessary\x20for\x20jspdf.svg().','href','xml\x20load\x20success','setTimeout','MAX_SAFE_INTEGER','text[font-size=\x2240px\x22]'];a=function(){return a6;};return a();}
